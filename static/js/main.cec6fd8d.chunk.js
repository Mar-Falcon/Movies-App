(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{103:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(93),s=a.n(r),i=(a(103),a(104),a(105),a(8)),l=a(9),o=a(0),j=function(e){var t=e.title,a=e.poster_path,n=e.popularity;return Object(o.jsx)(l.b,{to:"/detail",className:"nav-link",children:Object(o.jsxs)("div",{className:"card text-center bg-transparent",children:[Object(o.jsx)("img",{src:"http://image.tmdb.org/t/p/w500".concat(a),alt:t,className:"img-responsive"}),Object(o.jsxs)("div",{className:"card-body text-white",children:[Object(o.jsx)("h4",{className:"card-title",children:t}),Object(o.jsx)("p",{className:"card-text text-secundary",children:n}),Object(o.jsx)("button",{className:"btn btn-outline-secondary",children:" Agregar "})]})]})})},u=a(2),d=a.n(u),b=a(4),m=a(6),h=a(56),p=a.n(h),x=p.a.create({baseURL:"https://moviesapp-6eb16-default-rtdb.firebaseio.com/"}),O=p.a.create({baseURL:"https://api.themoviedb.org/3/",params:{api_key:"8cf3b3ed805edd61876f9676282f15e0"}}),f=a(10),v=function(e){var t=[];for(var a in e)t.push(Object(f.a)({id:a},e[a]));return t},g=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/users.json");case 2:return t=e.sent,e.abrupt("return",v(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.post("/users.json",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.delete("/users/".concat(t,".json"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={getUsers:g,addUser:N,deleteUser:w},k=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1],r=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.addUser(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getUsers();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("are you sure you want to delete this user?")){e.next=3;break}return e.next=3,y.deleteUser(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addUser:r,getUsers:s,users:a,deleteUser:i}},S=Object(n.createContext)({currentUser:{},setCurrentUser:function(){}}),C=function(e){var t=e.children,a=Object(n.useState)({}),c=Object(m.a)(a,2),r=c[0],s=c[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(S.Provider,{value:{currentUser:r,setCurrentUser:s},children:t})})},U=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.page,n=t.search,e.next=3,O.get("/search/multi?query=".concat(n,"&page=").concat(a));case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.page,e.next=3,O.get("/movie/top_rated?page=".concat(a));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={getMoviesFilter:U,getMovies:E},I=function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(a,n){var c,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=y.getUsers,e.next=4,c();case 4:if(r=e.sent,!(i=r.find((function(e){return e.email===a&&e.password===n})))){e.next=13;break}return e.next=9,p(i);case 9:(l=e.sent)&&(s(l),t(i)),e.next=14;break;case 13:throw new Error("El usuario no existe");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),t=Object(n.useContext)(S).setCurrentUser,a=Object(n.useState)(localStorage.getItem("user-token")||void 0),c=Object(m.a)(a,2),r=c[0],s=c[1],l=Object(n.useState)(),o=Object(m.a)(l,2),j=o[0],u=o[1],h=Object(i.f)().push;Object(n.useEffect)((function(){O()}),[]);var p=function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Math.random().toString(36).substr(2),e.next=4,x.patch("/users/".concat(t.id,".json"),{sessionToken:a});case 4:return e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){r&&localStorage.setItem("user-token",r)}),[r]);var O=function(){var e=Object(b.a)(d.a.mark((function e(){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=y.getUsers,e.next=4,n();case 4:c=e.sent,r&&(a=c.find((function(e){return e.sessionToken===r}))),a?(t(a),u(!0)):u(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return{login:e,loginWithToken:O,logout:function(){localStorage.removeItem("user-token"),h("/login"),t(void 0)},hasUserLoggedIn:j}},A=function(){var e=new URLSearchParams(window.location.search),t=parseInt(e.get("page"))||1,a=e.get("search")||void 0,c=Object(i.f)().push,r=Object(n.useState)(),s=Object(m.a)(r,2),l=s[0],o=s[1],j=Object(n.useState)(1),u=Object(m.a)(j,2),h=u[0],p=u[1],x=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.page,!(n=t.search)){e.next=7;break}return e.next=4,F.getMoviesFilter({page:a,search:n});case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,F.getMovies({page:a,search:n});case 9:c=e.sent;case 10:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x({page:t,search:a}).then((function(e){return o(e)}))}),[t,a]),Object(n.useEffect)((function(){x({page:t,search:a}).then((function(e){return p(e.total_pages)}))}),[t,a]),{page:t,search:a,items:l,setItems:o,setSearchParams:function(t){e.set("search",t),c("".concat(window.location.pathname,"?").concat(e.toString()))},setPageParams:function(t){e.set("page",t.toString()),c("".concat(window.location.pathname,"?").concat(e.toString()))},getSearchMulti:x,lastPage:h}},P=function(){var e=A(),t=e.items,a=e.getSearchMulti,c=e.page,r=e.search;return Object(n.useEffect)((function(){a({page:c,search:r})}),[a,c,r]),Object(o.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(o.jsx)("div",{className:"row",children:null===t||void 0===t?void 0:t.results.map((function(e){return Object(o.jsx)("div",{className:"col-md-3",children:Object(o.jsx)(j,{poster_path:e.poster_path,title:e.title,popularity:e.popularity,id:e.id,idDB:e.idDB,vote_average:e.vote_average})},e.id)}))})})},M=a(95),T=a.n(M),q=function(){var e=Object(n.useState)(),t=Object(m.a)(e,1)[0];return Object(o.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(o.jsx)(T.a,{color:"#555",loading:t,size:60})})},L=a(17),D={name:"",lastName:"",email:"",password:"",birthdate:""},R=a(16),_="This field is required",H="Wrong format",B={EIGHT:"Must be at least 8 characters",CHARACTERS:"It must have uppercase, lowercase and numbers"},z=R.b().shape({email:R.c().email(H).required(_),password:R.c().required(_).min(8,B.EIGHT).matches(/^(?=.*[a-z])(?=.*\d)[a-z\d\w\W]{8,}$/,B.CHARACTERS),name:R.c().required(_),lastName:R.c().required(_),birthdate:R.a().required(_)}),W=a(44),G=function(){var e,t,a,n,c=k().addUser,r=Object(i.f)().push,s=Object(L.d)({defaultValues:D,resolver:Object(W.a)(z)}),j=s.handleSubmit,u=s.register,m=s.formState,h=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t);case 3:r("/login"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("form",{action:"",onSubmit:j(h),className:"container row g-3",children:[Object(o.jsxs)("div",{className:"col-md-3",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"Name"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({type:"text"},u("name")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-danger",children:null===(e=m.errors.name)||void 0===e?void 0:e.message})]}),Object(o.jsxs)("div",{className:"col-md-3",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"Lastname"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({type:"text"},u("lastName")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-danger",children:null===(t=m.errors.name)||void 0===t?void 0:t.message})]}),Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"Birthdate"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({type:"Date"},u("birthdate")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-danger",children:m.errors.birthdate})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"E-mail"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({type:"email"},u("email")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-danger",children:null===(a=m.errors.email)||void 0===a?void 0:a.message})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"Password"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({type:"password"},u("password")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-danger",children:null===(n=m.errors.password)||void 0===n?void 0:n.message})]}),Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("button",{type:"submit",className:"btn btn-primary m-auto",children:"Create Account"})}),Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)(l.b,{to:"/login",className:"",children:"I have an account"})})]})},J={email:"",password:""},V=R.b().shape({email:R.c().email(H).required(_),password:R.c().required(_).min(8,B.EIGHT).matches(/^(?=.*[a-z])(?=.*\d)[a-z\d\w\W]{8,}$/)}),$=function(){var e,t,a=I().login,n=Object(i.f)().push,c=Object(L.d)({defaultValues:J,resolver:Object(W.a)(V)}),r=c.handleSubmit,s=c.register,j=c.formState,u=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.email,t.password);case 2:n("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("form",{action:"",onSubmit:r(u),className:"container row g-3",children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"E-mail"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({id:"email",type:"email"},s("email")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-white",children:null===(e=j.errors.email)||void 0===e?void 0:e.message})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"",className:"form-label",children:"Password"}),Object(o.jsx)("input",Object(f.a)(Object(f.a)({id:"pass",type:"password"},s("password")),{},{className:"form-control"})),Object(o.jsx)("span",{className:"text-white",children:null===(t=j.errors.password)||void 0===t?void 0:t.message})]}),Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("button",{type:"submit",className:"btn btn-primary m-auto",children:"Login on"})}),Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)(l.b,{to:"/signup",className:"",children:"I don\xb4t have an account"})})]})},K=a(24),Q=a(25),X=function(){var e=I().logout;return Object(o.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light p-3",children:Object(o.jsxs)("div",{className:"container-fluid",children:[Object(o.jsx)("div",{className:"navbar-brand text-white",children:Object(o.jsxs)("h1",{children:["Cinem",Object(o.jsx)("em",{children:"ADA"})]})}),Object(o.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(o.jsx)(K.a,{icon:Q.a})}),Object(o.jsxs)("div",{className:"navbar-collapse collapse",id:"navbarSupportedContent",children:[Object(o.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(l.b,{to:"/",className:"nav-link active text-light",children:" Home "})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(l.b,{to:"/movies",className:"nav-link active text-white",children:" Movies "})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(l.b,{to:"/series",className:"nav-link active text-white",children:" Series "})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(l.b,{to:"/users",className:"nav-link active text-white",children:" Users "})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(l.b,{to:"/admin",className:"nav-link active text-white",children:" Admin "})})]}),Object(o.jsx)("button",{className:"btn",onClick:e,children:Object(o.jsx)(K.a,{icon:Q.b})})]})]})})},Y=function(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)(X,{})})},Z=function(e){var t=e.children,a=e.id;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("main",{id:a,className:"main",children:t})})},ee=function(e){var t=e.children,a=e.hideHeader,n=e.mainClass;return Object(o.jsxs)(o.Fragment,{children:[!a&&Object(o.jsx)(Y,{}),Object(o.jsx)(Z,{id:n,children:t})]})},te=function(){var e=k(),t=e.users,a=e.getUsers,c=e.deleteUser;return Object(n.useEffect)((function(){a()}),[a,t]),Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{className:"col",children:[Object(o.jsx)("th",{scope:"col",className:"text-white",children:"Name"}),Object(o.jsx)("th",{scope:"col",className:"text-white",children:"LastName"}),Object(o.jsx)("th",{scope:"col",className:"text-white",children:"Email"}),Object(o.jsx)("th",{scope:"col",className:"text-white",children:"Birthdate"})]})}),Object(o.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(o.jsxs)("tr",{className:"col",children:[Object(o.jsx)("td",{className:"text-light",children:e.name}),Object(o.jsx)("td",{className:"text-light",children:e.lastName}),Object(o.jsx)("td",{className:"text-light",children:e.email}),Object(o.jsx)("td",{className:"text-light",children:(t=e.birthdate,new Intl.DateTimeFormat("es-AR").format(new Date(t)))}),Object(o.jsx)("td",{className:"text-light",children:Object(o.jsx)("button",{className:"btn btn-danger",onClick:function(){return c(e.id)},children:Object(o.jsx)(K.a,{icon:Q.d})})})]});var t}))})]})})},ae=function(){return Object(o.jsx)("div",{children:"Movies"})},ne=function(){return Object(o.jsx)("div",{children:"Series"})},ce=function(e){var t=e.handleChange;return Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"d-flex mb-5 align-items-center",children:[Object(o.jsx)("span",{className:"text-white me-4",children:"Buscar"}),Object(o.jsx)("input",{className:"form-control me-4",type:"text",placeholder:"Enter your search",onChange:function(e){return t(e.target.value)}}),Object(o.jsx)("span",{children:Object(o.jsx)(K.a,{icon:Q.c,className:"text-white auto"})})]})})},re=function(){var e=A(),t=e.setPageParams,a=e.page,n=e.lastPage;return Object(o.jsx)("div",{className:"Page navigation example",id:"",children:Object(o.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(o.jsx)("li",{className:"page-item",children:Object(o.jsx)("button",{className:"page-link",onClick:function(){t(1)},children:" First "})}),Object(o.jsx)("li",{className:"page-item",children:Object(o.jsxs)("button",{className:"page-link",onClick:function(){a>0&&t(a-1)},children:[" ",a-1," "]})}),Object(o.jsx)("li",{className:"page-item",children:Object(o.jsxs)("button",{className:"page-link active",children:[" ",a," "]})}),Object(o.jsx)("li",{className:"page-item",children:Object(o.jsxs)("button",{className:"page-link",onClick:function(){t(a+1)},children:[" ",a+1," "]})}),Object(o.jsx)("li",{className:"page-item",children:Object(o.jsx)("button",{className:"page-link",onClick:function(){t(n)},children:" Last "})})]})})},se=["/login","/signup"],ie=function(e){return function(){var t=Object(i.f)(),a=t.push,n=t.location,c=I().hasUserLoggedIn;return void 0===c?Object(o.jsx)(q,{}):(c&&se.includes(n.pathname)&&a("/"),!1!==c||se.includes(n.pathname)||a("/login"),Object(o.jsx)(e,{}))}},le=ie((function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsxs)("h1",{className:"text-white d-flex justify-content-center",children:["Cinem",Object(o.jsx)("em",{children:"ADA"})]}),Object(o.jsx)(G,{})]})})})})),oe=ie((function(){var e=A().setSearchParams;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(ee,{children:[Object(o.jsx)(ce,{handleChange:e}),Object(o.jsx)(P,{}),Object(o.jsx)(re,{})]})})})),je=ie((function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)($,{})})})),ue=ie((function(){return Object(o.jsx)(ee,{children:Object(o.jsx)(te,{})})})),de=ie((function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(ee,{children:Object(o.jsx)(P,{})})})})),be=ie((function(){return Object(o.jsx)(ee,{children:Object(o.jsx)(ae,{})})})),me=ie((function(){return Object(o.jsx)(ee,{children:Object(o.jsx)(ne,{})})})),he=ie((function(){return Object(o.jsx)(ee,{children:Object(o.jsx)("div",{children:"Detail"})})})),pe=function(){return Object(o.jsx)(C,{children:Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(l.a,{children:Object(o.jsxs)(i.c,{children:[Object(o.jsx)(i.a,{path:"/signup",component:le}),Object(o.jsx)(i.a,{path:"/admin",component:oe}),Object(o.jsx)(i.a,{path:"/detail",component:he}),Object(o.jsx)(i.a,{path:"/movies",component:be}),Object(o.jsx)(i.a,{path:"/series",component:me}),Object(o.jsx)(i.a,{path:"/login",component:je}),Object(o.jsx)(i.a,{path:"/users",component:ue}),Object(o.jsx)(i.a,{path:"/",component:de})]})})})})};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(pe,{})}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.cec6fd8d.chunk.js.map