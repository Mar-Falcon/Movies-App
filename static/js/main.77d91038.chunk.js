(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{104:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(93),s=n.n(c),i=(n(104),n(105),n(106),n(9)),o=n(10),l=n(2),u=n.n(l),d=n(3),j=n(17),b=n(18),m=n(7),p=n(55),v=n.n(p),h=v.a.create({baseURL:"https://moviesapp-6eb16-default-rtdb.firebaseio.com/"}),f=v.a.create({baseURL:"https://api.themoviedb.org/3/",params:{api_key:"8cf3b3ed805edd61876f9676282f15e0"}}),x=n(4),O=function(e){var t=[];for(var n in e)t.push(Object(x.a)({id:n},e[n]));return t},g=function(e){var t=[];for(var n in e)t.push(Object(x.a)({idFB:n},e[n]));return t},w=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/users.json");case 2:return t=e.sent,e.abrupt("return",O(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/users.json",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.delete("/users/".concat(t,".json"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={getUsers:w,addUser:N,deleteUser:y},U=function(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.addUser(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getUsers();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("are you sure you want to delete this user?")){e.next=3;break}return e.next=3,k.deleteUser(t);case 3:r=n.filter((function(e){return e.id!==t})),a(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addUser:c,getUsers:s,users:n,deleteUser:i}},F=n(0),M=Object(r.createContext)({currentUser:{},setCurrentUser:function(){}}),S=function(e){var t=e.children,n=Object(r.useState)({}),a=Object(m.a)(n,2),c=a[0],s=a[1];return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(M.Provider,{value:{currentUser:c,setCurrentUser:s},children:t})})},_=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,r=t.search,e.next=3,f.get("/search/multi?query=".concat(r,"&page=").concat(n));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,e.next=3,f.get("/movie/top_rated?page=".concat(n));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/movie/".concat(t,"/videos"));case 2:return n=e.sent,e.abrupt("return",n.data.results);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={getMoviesFilter:_,getMovies:B,getVideo:C},E=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/movies.json");case 2:return t=e.sent,e.abrupt("return",g(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/movies.json",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.delete("/movies/".concat(t,".json"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/movies/".concat(t,".json"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T={getMovies:E,addMovies:D,deleteMovies:P,getMovieIdFB:A},L=function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,c,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=k.getUsers,e.next=4,r();case 4:if(c=e.sent,!(s=c.find((function(e){return e.email===t&&e.password===n})))){e.next=13;break}return e.next=9,x(s);case 9:(i=e.sent)&&(l(i),a(s)),e.next=14;break;case 13:throw new Error("El usuario no existe");case 14:o=c.find((function(e){return"admin"===e.role})),a(o||s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}(),t=Object(r.useContext)(M),n=t.currentUser,a=t.setCurrentUser,c=Object(r.useState)(localStorage.getItem("user-token")||void 0),s=Object(m.a)(c,2),o=s[0],l=s[1],j=Object(r.useState)(),b=Object(m.a)(j,2),p=b[0],v=b[1],f=Object(i.f)().push;Object(r.useEffect)((function(){O()}),[]);var x=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Math.random().toString(36).substr(2),e.next=4,h.patch("/users/".concat(t.id,".json"),{sessionToken:n});case 4:return e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){o&&localStorage.setItem("user-token",o)}),[o]);var O=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=k.getUsers,e.next=4,n();case 4:r=e.sent,o&&(t=r.find((function(e){return e.sessionToken===o}))),t?(a(t),v(!0)):v(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return{login:e,loginWithToken:O,logout:function(){localStorage.removeItem("user-token"),f("/login"),a(void 0)},hasUserLoggedIn:p,currentUser:n,updateUserData:function(){O()}}},R=function(){var e=new URLSearchParams(window.location.search),t=parseInt(e.get("page"))||1,n=e.get("search")||void 0,a=Object(i.f)().push,c=Object(r.useState)(),s=Object(m.a)(c,2),o=s[0],l=s[1],j=Object(r.useState)(1),b=Object(m.a)(j,2),p=b[0],v=b[1],h=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.page,!(r=t.search)){e.next=7;break}return e.next=4,I.getMoviesFilter({page:n,search:r});case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,I.getMovies({page:n,search:r});case 9:a=e.sent;case 10:return l(a),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getVideo(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{page:t,search:n,items:o,setItems:l,setSearchParams:function(t){e.set("search",t),a("".concat(window.location.pathname,"?").concat(e.toString()))},setPageParams:function(t){e.set("page",t.toString()),a("".concat(window.location.pathname,"?").concat(e.toString()))},getSearchMulti:h,getMovieTrailer:f,lastPage:p,setLastPage:v}},q=n(5),V=function(){var e=Object(r.useState)(),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(m.a)(c,2),i=s[0],o=s[1];Object(r.useEffect)((function(){n||j()}),[n]);var l=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.addMovies(t);case 2:return e.next=4,j();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getMovies();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getMovies();case 2:t=e.sent,(n=t.filter((function(e){return"movie"!==e.media_type})))&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getMovies();case 2:t=e.sent,(n=t.filter((function(e){return"movie"===e.media_type})))&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this movie?")){e.next=3;break}return e.next=3,T.deleteMovies(t);case 3:j();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getMovieIdFB(t);case 2:n=e.sent,o(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null===t||void 0===t?void 0:t.viewed)||[],e.next=3,h.patch("/users/".concat(null===t||void 0===t?void 0:t.id,".json"),{viewed:[].concat(Object(q.a)(r),[n])});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null===t||void 0===t||null===(r=t.viewed)||void 0===r?void 0:r.filter((function(e){return e!==n})),e.next=3,h.patch("users/".concat(null===t||void 0===t?void 0:t.id,".json"),{viewed:a});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{addItemsFB:l,getMoviesFB:j,itemsFB:n,deleteMoviesFB:v,getDetail:f,movieDetail:i,setMovieDetail:o,filterMovies:p,filterSeries:b,addMovieUser:x,removeMovieUser:O,isMovieViewed:function(e,t){var n;return null===e||void 0===e||null===(n=e.viewed)||void 0===n?void 0:n.find((function(e){return e===t}))},isMovieInFB:function(e){return null===n||void 0===n?void 0:n.find((function(t){return t.id===e}))},setItemsFB:a}},H=n(95),z=function(e){var t=e.rating;return Object(F.jsx)(H.Rating,{ratingValue:10*t,size:25,readonly:!0,fillColor:"orange",emptyColor:"gray"})},W=n.p+"static/media/noimage.2a943df8.jpg",G=function(e){var t,n=e.item,r=e.currentUser,a=e.updateUserData,c=e.updateItems,s=V(),i=s.addItemsFB,l=s.addMovieUser,m=s.removeMovieUser,p=s.isMovieViewed,v=s.isMovieInFB,h=s.itemsFB,f=s.getMoviesFB,x=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===h||void 0===h?void 0:h.find((function(e){return e.id===t})),!c){e.next=4;break}return e.next=4,c(null===n||void 0===n?void 0:n.idFB);case 4:f();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{className:"card text-center bg-transparent mb-2",children:[Object(F.jsx)(o.b,{to:"/detail/".concat(n.idFB),className:"nav-link",children:Object(F.jsxs)("div",{className:"card-body text-white",children:[Object(F.jsx)("img",{src:(t=n.poster_path,t?"http://image.tmdb.org/t/p/w500/".concat(t):W),alt:n.title,className:"img-responsive col-md-9 mb-3 w-100"}),Object(F.jsx)("h4",{className:"card-title",children:n.title||n.name}),Object(F.jsx)("div",{children:Object(F.jsx)(z,{rating:n.vote_average})}),Object(F.jsx)("p",{className:"card-text text-secundary mt-2",children:n.vote_average})]})}),Object(F.jsxs)("div",{className:"card-footer border-top-0 bg-transparent",children:["admin"===(null===r||void 0===r?void 0:r.role)&&!v(n.id)&&Object(F.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",onClick:function(){return x(n)},children:" Save "}),"admin"===(null===r||void 0===r?void 0:r.role)&&v(n.id)&&Object(F.jsx)("button",{className:"btn btn-outline-danger",type:"submit",onClick:function(){return O(n.id)},children:" Delete "}),"user"===(null===r||void 0===r?void 0:r.role)&&!p(r,n.idFB)&&Object(F.jsxs)("button",{className:"btn btn-outline-warning",type:"submit",onClick:function(){return e=r,t=n.idFB,a(),void l(e,t);var e,t},children:[Object(F.jsx)(j.a,{icon:b.c})," "]}),"user"===(null===r||void 0===r?void 0:r.role)&&p(r,n.idFB)&&Object(F.jsxs)("button",{className:"btn btn-outline-warning",type:"submit",onClick:function(){return e=r,t=n.idFB,a(),void m(e,t);var e,t},children:[Object(F.jsx)(j.a,{icon:b.b})," "]})]})]})},J=function(e){var t=e.items,n=L(),r=n.currentUser,a=n.updateUserData,c=V().deleteMoviesFB;return Object(F.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(F.jsx)("div",{className:"row",children:null===t||void 0===t?void 0:t.results.map((function(e){return Object(F.jsx)("div",{className:"col-md-3",children:Object(F.jsx)(G,{item:Object(x.a)(Object(x.a)({},e),{},{title:e.title||e.name,release_date:e.release_date||e.first_air_date,media_type:e.media_type||"movie"}),currentUser:r,updateUserData:a,updateItems:c})},e.id)}))})})},$=n(96),Y=n.n($),K=function(){var e=Object(r.useState)(),t=Object(m.a)(e,1)[0];return Object(F.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(F.jsx)(Y.a,{color:"#555",loading:t,size:60})})},Q=function(){var e=V(),t=e.getDetail,n=e.movieDetail,a=R().getMovieTrailer,c=Object(r.useState)([]),s=Object(m.a)(c,2),o=s[0],l=s[1],u=Object(i.g)().id;return Object(r.useEffect)((function(){t(u)}),[u]),Object(r.useEffect)((function(){a(null===n||void 0===n?void 0:n.id).then((function(e){return l(e)}))}),[n]),Object(F.jsx)(F.Fragment,{children:void 0!==(null===n||void 0===n?void 0:n.id)&&Object(F.jsx)("div",{className:"card bg-transparent text-white d-flex p-4",children:Object(F.jsxs)("div",{className:"row",children:[Object(F.jsxs)("div",{className:"car-body col-md-7",children:[Object(F.jsx)("h1",{className:"card-title",children:(null===n||void 0===n?void 0:n.title)||(null===n||void 0===n?void 0:n.name)}),Object(F.jsx)("h4",{className:"card-title",children:null===n||void 0===n?void 0:n.original_title}),Object(F.jsx)("div",{children:Object(F.jsx)(z,{rating:n.vote_average})}),Object(F.jsx)("p",{className:"card-text text-secundary mt-2",children:null===n||void 0===n?void 0:n.vote_average}),Object(F.jsx)("p",{className:"overvie mt-3",children:null===n||void 0===n?void 0:n.overview}),Object(F.jsxs)("ul",{className:"mt-4",children:[Object(F.jsxs)("li",{children:[" original language: ",null===n||void 0===n?void 0:n.original_language]}),Object(F.jsxs)("li",{children:[" Release date: ",(null===n||void 0===n?void 0:n.release_date)||(null===n||void 0===n?void 0:n.first_air_date)]})]}),Object(F.jsxs)("div",{className:"trailers mt-6",children:[Object(F.jsx)("h3",{className:"text-white",children:"Trailers"}),null===o||void 0===o?void 0:o.map((function(e){return Object(F.jsx)("div",{className:"row mt-4",children:Object(F.jsx)("div",{className:"col-md-6 mb-3",children:Object(F.jsx)("iframe",{width:"90%",height:"215",src:"https://www.youtube.com/embed/".concat(e.key),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}))]})]}),Object(F.jsx)("div",{className:"col-md-5",children:Object(F.jsx)("img",{src:"http://image.tmdb.org/t/p/w500".concat(null===n||void 0===n?void 0:n.poster_path),alt:null===n||void 0===n?void 0:n.title,className:"img-responsive"})})]})})})},X=n(44),Z=n(19),ee={name:"",lastName:"",email:"",password:"",birthdate:"",role:"user",viewed:[""]},te=n(16),ne="This field is required",re="Wrong format",ae={EIGHT:"Must be at least 8 characters",CHARACTERS:"It must have uppercase, lowercase and numbers"},ce=te.b().shape({email:te.c().email(re).required(ne),password:te.c().required(ne).min(8,ae.EIGHT).matches(/^(?=.*[a-z])(?=.*\d)[a-z\d\w\W]{8,}$/,ae.CHARACTERS),name:te.c().required(ne),lastName:te.c().required(ne),birthdate:te.a().required(ne).min(new Date(1900,0,1)),role:te.c()}),se=function(){var e,t,n,r,a=U().addUser,c=Object(i.f)().push,s=Object(Z.d)({defaultValues:ee,resolver:Object(X.a)(ce)}),l=s.handleSubmit,j=s.register,b=s.formState,m=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:c("/login");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("form",{action:"",onSubmit:l(m),className:"container row g-3 mt-5",children:[Object(F.jsxs)("div",{className:"col-md-3",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"Name"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"text"},j("name")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-danger",children:null===(e=b.errors.name)||void 0===e?void 0:e.message})]}),Object(F.jsxs)("div",{className:"col-md-3",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"Lastname"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"text"},j("lastName")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-danger",children:null===(t=b.errors.name)||void 0===t?void 0:t.message})]}),Object(F.jsxs)("div",{className:"col-md-6",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"Birthdate"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"Date"},j("birthdate")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-danger",children:b.errors.birthdate})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"E-mail"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"email"},j("email")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-danger",children:null===(n=b.errors.email)||void 0===n?void 0:n.message})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"Password"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"password"},j("password")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-danger",children:null===(r=b.errors.password)||void 0===r?void 0:r.message})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"",hidden:!0,children:"Role"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"text"},j("role")),{},{hidden:!0}))]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"",hidden:!0,children:"Viewed"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({type:"text"},j("viewed")),{},{hidden:!0}))]}),Object(F.jsx)("div",{className:"d-flex justify-content-center",children:Object(F.jsx)("button",{type:"submit",className:"btn btn-primary m-auto",children:"Create Account"})}),Object(F.jsx)("div",{className:"d-flex justify-content-center",children:Object(F.jsx)(o.b,{to:"/login",className:"",children:"I have an account"})})]})},ie={email:"",password:""},oe=te.b().shape({email:te.c().email(re).required(ne),password:te.c().required(ne).min(8,ae.EIGHT).matches(/^(?=.*[a-z])(?=.*\d)[a-z\d\w\W]{8,}$/)}),le=function(){var e,t,n=L().login,r=Object(i.f)().push,a=Object(Z.d)({defaultValues:ie,resolver:Object(X.a)(oe)}),c=a.handleSubmit,s=a.register,l=a.formState,j=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t.email,t.password);case 2:r("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("form",{action:"",onSubmit:c(j),className:"container row g-3",children:[Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"E-mail"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({id:"email",type:"email"},s("email")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-white",children:null===(e=l.errors.email)||void 0===e?void 0:e.message})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"",className:"form-label text-white",children:"Password"}),Object(F.jsx)("input",Object(x.a)(Object(x.a)({id:"pass",type:"password"},s("password")),{},{className:"form-control"})),Object(F.jsx)("span",{className:"text-white",children:null===(t=l.errors.password)||void 0===t?void 0:t.message})]}),Object(F.jsx)("div",{className:"d-flex justify-content-center",children:Object(F.jsx)("button",{type:"submit",className:"btn btn-primary m-auto",children:"Login on"})}),Object(F.jsx)("div",{className:"d-flex justify-content-center",children:Object(F.jsx)(o.b,{to:"/signup",className:"",children:"I don\xb4t have an account"})}),Object(F.jsx)("div",{className:"d-flex justify-content-center",children:Object(F.jsx)("div",{className:"text-white",children:"To login in by roles: For Admin, email: admin@ada.com Password: Admin123. For users, create your user."})})]})},ue=function(){var e=L(),t=e.logout,n=e.currentUser;return Object(F.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light p-3",children:Object(F.jsxs)("div",{className:"container-fluid",children:[Object(F.jsx)("div",{className:"navbar-brand text-white",children:Object(F.jsxs)("h1",{children:["Cinem",Object(F.jsx)("em",{children:"ADA"})]})}),Object(F.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(F.jsx)(j.a,{icon:b.a})}),Object(F.jsxs)("div",{className:"navbar-collapse collapse",id:"navbarSupportedContent",children:[Object(F.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:[Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/",className:"nav-link active text-light",children:" Home "})}),Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/movies",className:"nav-link active text-white",children:" Movies "})}),Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/series",className:"nav-link active text-white",children:" Series "})}),"admin"===(null===n||void 0===n?void 0:n.role)&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/users",className:"nav-link active text-white",children:" Users "})}),Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/admin",className:"nav-link active text-white",children:" Admin "})})]})]}),Object(F.jsx)("button",{className:"btn",onClick:t,children:Object(F.jsx)(j.a,{icon:b.d})})]})]})})},de=function(){return Object(F.jsx)("header",{className:"header",children:Object(F.jsx)(ue,{})})},je=function(e){var t=e.children,n=e.id;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("main",{id:n,className:"main",children:t})})},be=function(e){var t=e.children,n=e.hideHeader,r=e.mainClass;return Object(F.jsxs)(F.Fragment,{children:[!n&&Object(F.jsx)(de,{}),Object(F.jsx)(je,{id:r,children:t})]})},me=function(){var e=U(),t=e.users,n=e.getUsers,a=e.deleteUser;return Object(r.useEffect)((function(){n()}),[]),Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("table",{className:"table",children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{className:"col",children:[Object(F.jsx)("th",{scope:"col",className:"text-white",children:"Name"}),Object(F.jsx)("th",{scope:"col",className:"text-white",children:"LastName"}),Object(F.jsx)("th",{scope:"col",className:"text-white",children:"Email"}),Object(F.jsx)("th",{scope:"col",className:"text-white",children:"Birthdate"})]})}),Object(F.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(F.jsxs)("tr",{className:"col",children:[Object(F.jsx)("td",{className:"text-light",children:e.name}),Object(F.jsx)("td",{className:"text-light",children:e.lastName}),Object(F.jsx)("td",{className:"text-light",children:e.email}),Object(F.jsx)("td",{className:"text-light",children:(t=e.birthdate,new Intl.DateTimeFormat("es-AR").format(new Date(t)))}),Object(F.jsx)("td",{className:"text-light",children:Object(F.jsx)("button",{className:"btn btn-danger",onClick:function(){return a(e.id)},children:Object(F.jsx)(j.a,{icon:b.f})})})]});var t}))})]})})},pe=function(){var e=V(),t=e.itemsFB,n=e.filterMovies,a=e.deleteMoviesFB,c=L(),s=c.currentUser,i=c.updateUserData;return Object(r.useEffect)((function(){n()}),[]),Object(F.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(F.jsx)("div",{className:"row",children:null===t||void 0===t?void 0:t.map((function(e){return Object(F.jsx)("div",{className:"col-md-3",children:Object(F.jsx)(G,{item:Object(x.a)(Object(x.a)({},e),{},{title:e.title||e.name,release_date:e.release_date||e.first_air_date,media_type:e.media_type||"movie"}),currentUser:s,updateUserData:i,updateItems:a})})}))})})},ve=function(){var e=V(),t=e.itemsFB,n=e.filterSeries,a=e.deleteMoviesFB,c=L(),s=c.currentUser,i=c.updateUserData;return Object(r.useEffect)((function(){n()}),[]),Object(F.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(F.jsx)("div",{className:"row",children:null===t||void 0===t?void 0:t.map((function(e){return Object(F.jsx)("div",{className:"col-md-3",children:Object(F.jsx)(G,{item:Object(x.a)(Object(x.a)({},e),{},{title:e.title||e.name,release_date:e.release_date||e.first_air_date,media_type:e.media_type||"movie"}),currentUser:s,updateUserData:i,updateItems:a})})}))})})},he=function(e){var t=e.handleChange;return Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"d-flex mb-5 align-items-center",children:[Object(F.jsx)("span",{className:"text-white me-4",children:"Buscar"}),Object(F.jsx)("input",{className:"form-control me-4",type:"text",placeholder:"Enter your search",onChange:function(e){return t(e.target.value)}}),Object(F.jsx)("span",{children:Object(F.jsx)(j.a,{icon:b.e,className:"text-white auto"})})]})})},fe=function(){var e=R(),t=e.setPageParams,n=e.page,a=e.lastPage,c=e.getSearchMulti,s=e.search,i=e.setLastPage;Object(r.useEffect)((function(){c({page:n,search:s}).then((function(e){return i(e.total_pages)}))}),[n,s]);var o,l,u=!0;n<=1&&(o="disabled"),n===a&&(l="disabled");return Object(F.jsx)("div",{className:"Page navigation example pb-2",children:Object(F.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(F.jsx)("li",{className:"page-item ".concat(o),children:Object(F.jsx)("button",{className:"page-link",onClick:function(){t(1),u=!1},disabled:!u,children:" First "})}),Object(F.jsx)("li",{className:"page-item ".concat(o),id:"prevPage",children:Object(F.jsxs)("button",{className:"page-link",onClick:function(){n<=1?u=!1:t(n-1)},disabled:!u,children:[" ",n-1," "]})}),Object(F.jsx)("li",{className:"page-item active",children:Object(F.jsxs)("button",{className:"page-link",children:[" ",n," "]})}),Object(F.jsx)("li",{className:"page-item ".concat(l),children:Object(F.jsxs)("button",{className:"page-link",onClick:function(){t(n+1),n===a&&(t(n),u=!1)},disabled:!u,children:[" ",n+1," "]})}),Object(F.jsx)("li",{className:"page-item ".concat(l),children:Object(F.jsx)("button",{className:"page-link",onClick:function(){t(a),u=!1},disabled:!u,children:" Last "})})]})})},xe=["/login","/signup"],Oe=["/admin","/users"],ge=function(e){return function(){var t=Object(i.f)(),n=t.push,r=t.location,a=L(),c=a.hasUserLoggedIn,s=a.currentUser;return void 0===c?Object(F.jsx)(K,{}):("admin"!==(null===s||void 0===s?void 0:s.role)&&Oe.includes(r.pathname)&&n("/"),c&&xe.includes(r.pathname)&&n("/"),!1!==c||xe.includes(r.pathname)||n("/login"),Object(F.jsx)(e,{}))}},we=ge((function(){return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(F.jsxs)("div",{className:"card-body",children:[Object(F.jsxs)("h1",{className:"text-white d-flex justify-content-center",children:["Cinem",Object(F.jsx)("em",{children:"ADA"})]}),Object(F.jsx)(se,{})]})})})})),Ne=ge((function(){var e=R(),t=e.items,n=e.getSearchMulti,a=e.page,c=e.search,s=e.setSearchParams;return Object(r.useEffect)((function(){n({page:a,search:c})}),[a,c]),Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(be,{children:[Object(F.jsx)(he,{handleChange:s}),Object(F.jsx)(J,{items:t}),Object(F.jsx)(fe,{})]})})})),ye=ge((function(){return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("div",{className:"container mt-5",children:Object(F.jsx)(le,{})})})})),ke=ge((function(){return Object(F.jsx)(be,{children:Object(F.jsx)(me,{})})})),Ue=ge((function(){var e=V(),t=e.itemsFB,n=e.getMoviesFB,a=e.deleteMoviesFB,c=L(),s=c.currentUser,i=c.updateUserData;return Object(r.useEffect)((function(){n()}),[]),Object(F.jsx)(be,{children:Object(F.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(F.jsx)("div",{className:"row",children:null===t||void 0===t?void 0:t.map((function(e){return Object(F.jsx)("div",{className:"col-md-3",children:Object(F.jsx)(G,{item:Object(x.a)(Object(x.a)({},e),{},{title:e.title||e.name,release_date:e.release_date||e.first_air_date,media_type:e.media_type||"movie"}),currentUser:s,updateUserData:i,updateItems:a})},e.id)}))})})})})),Fe=ge((function(){return Object(F.jsx)(be,{children:Object(F.jsx)(pe,{})})})),Me=ge((function(){return Object(F.jsx)(be,{children:Object(F.jsx)(ve,{})})})),Se=ge((function(){return Object(F.jsx)(be,{children:Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)(Q,{}),Object(F.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:Object(F.jsxs)("div",{className:"row",children:[Object(F.jsx)("h3",{className:"text-white mt-5",children:"Also..."}),Object(F.jsx)(pe,{})]})})]})})})),_e=function(){return Object(F.jsx)(S,{children:Object(F.jsx)("div",{className:"App",children:Object(F.jsx)(o.a,{children:Object(F.jsxs)(i.c,{children:[Object(F.jsx)(i.a,{path:"/signup",component:we}),Object(F.jsx)(i.a,{path:"/admin",component:Ne}),Object(F.jsx)(i.a,{path:"/detail/:id",component:Se}),Object(F.jsx)(i.a,{path:"/movies",component:Fe}),Object(F.jsx)(i.a,{path:"/series",component:Me}),Object(F.jsx)(i.a,{path:"/login",component:ye}),Object(F.jsx)(i.a,{path:"/users",component:ke}),Object(F.jsx)(i.a,{path:"/",component:Ue})]})})})})};s.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(_e,{})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.77d91038.chunk.js.map